{% extends "base.html" %}
{% block title %}
  {{ title }}
{% endblock title %}
{% block content %}
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          <div>{{ user.name }}的全部考核记录</div>
          {% if not grouped_assessments %}<div class="alert alert-info">暂无考核记录</div>{% endif %}
          <div class="box-body">
            <div id="example2_wrapper"
                 class="dataTables_wrapper form-inline dt-bootstrap">
              <div class="row">
                <div class="col-sm-6"></div>
                <div class="col-sm-6"></div>
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="table-responsive">
                    <!-- Table -->
                    <table class="table table-hover">
                      <thead>
                        <tr role="row">
                          <th class="col-xs-2">学期</th>
                          <th class="col-xs-2">参与考核部门</th>
                          <th class="col-xs-3">考核类型</th>
                          <th>总成绩</th>
                          <th>名次</th>
                          <th>查询</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for group in grouped_assessments %}
                          {% for assess in group.assessments %}
                            <tr>
                              <td>{{ group.semester }}</td>
                              <td>{{ group.assess_depart }}</td>
                              <td>
                                {% if assess.term_type == "期中" %}
                                  <span class="label label-info">期中</span>
                                {% elif assess.term_type == "期末" %}
                                  <span class="label label-success">期末</span>
                                {% else %}
                                  <span class="label label-warning">{{ assess.term_type }}</span>
                                {% endif %}
                              </td>
                              <td>{{ assess.total_score|default:"-" }}</td>
                              <td>{{ assess.rank|default:"-" }}</td>
                              <td>
                                <a href="{% url 'assessments:assessment_detail' model_name=assess.model pk=assess.id %}"
                                   class="btn btn-sm btn-success">查看详情</a>
                              </td>
                            </tr>
                          {% endfor %}
                        {% endfor %}
                      </tbody>
                    </table>
                    <!--End Table -->
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-5">
                  <div class="dataTables_info"
                       id="example2_info"
                       role="status"
                       aria-live="polite">每页展示10条数据</div>
                </div>
                <div class="col-sm-7">
                  <div class="dataTables_paginate paging_simple_numbers"
                       id="example2_paginate">
                    <ul class="pagination">
                      {{ page_string }}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
